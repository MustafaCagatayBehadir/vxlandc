<config-template xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{$DEVICE}</name>
      <config>
        <interface xmlns="http://tail-f.com/ned/cisco-nx">
          <port-channel>
            <name>{$PO_ID}</name>
            <enable>
              <switchport>true</switchport>
            </enable>
            <switchport>
              <mode>{$PORT_MODE}</mode>
            </switchport>
            <?if {$SHUTDOWN = 'TRUE'}?>
            <shutdown />
            <?else ?>
            <shutdown tags="delete" />
            <?end ?>
            <description>{$DESCRIPTION}</description>
            <mtu>9216</mtu>
            <spanning-tree>
              <?if {$CONNECTION = 'host'}?>
              <bpduguard>enable</bpduguard>
              <?else ?>
              <guard>root</guard>
              <?end ?>
              <port>
                <type>edge</type>
                <?if {$PORT_MODE = 'trunk'}?>
                <trunk />
                <?end ?>
              </port>
            </spanning-tree>
            <storm-control>
              <broadcast>
                <level>{$BUM}</level>
              </broadcast>
              <unicast>
                <level>{$BUM}</level>
              </unicast>
              <multicast>
                <level>{$BUM}</level>
              </multicast>
              <action>
                <?if {$TRAP = 'TRUE'}?>
                <trap />
                <?else ?>
                <shutdown />
                <?end ?>
              </action>
            </storm-control>
            <?if {$VPC_NODE = 'TRUE'}?>
            <vpc>
              <?if {$VPC = 'TRUE'}?>
              <port-channel-number>{$PO_ID}</port-channel-number>
              <?else ?>
              <orphan-port>suspend</orphan-port>
              <?end ?>
            </vpc>
            <?end ?>
          </port-channel>
        </interface>
      </config>
    </device>
  </devices>
</config-template>